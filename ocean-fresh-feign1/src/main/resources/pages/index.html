
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
	<iframe name="toppage" width=100% height=100% marginwidth=0 marginheight=0 frameborder="no" border="0"  src="common/mystyle.html" ></iframe>
</head>
<body>
sele


<input type="text"  style="width:200px"  id="monname" placeholder="请输入地区名称">
<input type="text"  style="width:200px"  id="monreg" placeholder="请输入供应商名称">
<button type="button" class="btn btn-success" onclick="add()">新增</button>
<input type="hidden" id="monid">

<br>

<input type="text"  style="width:200px"  id="monnames" placeholder="请输入地区名称">
<input type="text"  style="width:200px"  id="monregs" placeholder="请输入供应商名称">
<button type="button" class="btn btn-success" onclick="update()">修改</button>
<!--  条件查询的 form  表单  -->
	<!-- 表单 -->
		<form id="pro_from" class="form-inline">
		<br>
			  <div class="form-group">
			   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
			   &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;  
			    <input type="text" class="form-control" id="proName" placeholder="名称查询">
			   &emsp; &emsp; &emsp; &emsp; &emsp; &emsp;
			   <span id="add"></span>
			  </div>
			 
		</form><!-- 
		 <button type="button" class="btn btn-error" onclick="addMongo()">新增</button>
		 <button type="button" class="btn btn-error" onclick="addbooks()">批量新增</button> -->
		<table id="bookMongo"></table>
</body>
<script type="text/javascript" >
$(function (){
	search();
})
function search(){
	$("#bookMongo").bootstrapTable('destroy');
	$("#add").html('<button type="button" class="btn btn-success" onclick="search()">搜索</button>');
 	$("#bookMongo").bootstrapTable('refresh');
	$("#bookMongo").bootstrapTable({
		 url:"<%=request.getContextPath()%>/sele.do",	
		 method:"post",
		 striped: true,  	// 斑马线效果     默认false 
		 //只允许选中一行
		 singleSelect:true,
		 //选中行是不选中复选框或者单选按钮
		 clickToSelect:true,
		 showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
		 cardView: false,                    //是否显示详细视图
		 showColumns: false,                  //是否显示所有的列
		 showRefresh: false,                  //是否显示刷新按钮
		 minimumCountColumns: 2,     //  最少留两列
		 detailView: false,                  //是否显示父子表
		 //发送到服务器的数据编码类型  
		contentType:'application/x-www-form-urlencoded;charset=UTF-8'	,   //数据编码纯文本  offset=0&limit=5
		toolbar:'#tabToolBar',   //  工具定义位置
		columns:[
			{field:'id',title:'id',width:100},
			{field:'name',title:'地区',width:100 },
			{field:'region',title:'供应商',width:100 },
			
			{field:'cz',title:'操作',width:100,
				 	formatter:function(value,row,index){
				 		var a = '<input type="button" class="btn btn-success" value="删除" onclick="deletemons(\''+row.id+'\')"><input type="button" class="btn btn-success" value="修改" onclick="toupdate(\''+row.id+'\')">';
						return a;
					} 
			}
	         ],
		         //传递参数（*）
				 queryParams: function(params) {
					 var name=$("#proName").val();
					 	var whereParams = {    
					 			/*
					 				分页  自定义的参数         默认传 limit（展示几条）    offset（从第几条开始    起始条数）           
					 			*/
					 			"pageSize":params.limit,
					 			"start":params.offset,
					 			"name":name,
					 			//"pro_name":params.search,//精确搜索产品名称
					 	}
						 return whereParams;
					 },
					 //前台--排序字段
					 //sortName:'proPrice',
					 //sortOrder:'desc',
					 //前台--搜索框
					 search:false,
					 //启动回车键做搜索功能
					 searchOnEnterKey:false,
			   
	});
}
function add(){
	var u=$("#monname").val();
	var i=$("#monreg").val();
	alert(u)
	$.ajax({
		url:"<%=request.getContextPath()%>/add.do?name="+u+"&monreg="+i,
		type:"post",
		
		success:function(data){
			
			alert(data)
			location.href=location;
		}
	})

	
}
function deletemons(u){
	
	alert(u)
	$.ajax({
		url:"<%=request.getContextPath()%>/delete.do?id="+u,
		type:"post",
		
		success:function(data){
			
			alert(data)
			location.href=location;
		}
	})

	
}

function toupdate(u){
	
	$("#monid").val(u)
	$.ajax({
		url:"<%=request.getContextPath()%>/toindexupdate.do?id="+u,
		type:"post",
		
		success:function(data){
			
			$("#monnames").val(data.name)
			$("#monregs").val(data.region)
		}
	})

	
}

function update(){
	
	var id=$("#monid").val();
	var name=	$("#monnames").val();
	var monregs=	$("#monregs").val();
	$.ajax({
		url:"<%=request.getContextPath()%>/update.do?id="+id+"&name="+name+"&monreg="+monregs,
		type:"post",
		
		success:function(data){
			location.href=location;
			
		}
	})

	
}




</script>
</html>